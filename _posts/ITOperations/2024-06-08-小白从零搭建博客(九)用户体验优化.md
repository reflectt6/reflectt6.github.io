---
layout: page-with-sidebar-math
title:  "小白从零搭建博客(九)用户体验优化"
date:   2024-06-08 13:47:03 +0800
author: reflectt6
categories: "小白从零搭建博客"
mainTag: "运维"
secondaryTag: "小白从零搭建博客"
hideTag: false
---

## 前言

这是小白从零建站系列的第九篇，主要目的是优化使用体验。

本博客于2023年9月底首次上线，至今已更新过百文章。起到了归类整理零碎知识，快速查找定位旧知识的作用。现在遇到一些明确知道以前研究过，但是记不起来的问题，马上来博客查询，能够快速解决我的问题。

我个人对此非常满意。

但是随着查询次数的增多，还是发现了一些不方便的地方，正好借着放假，解决一下。

目前发现的问题有：

1、目前点击博客所有的链接都会覆盖当前页面，有时我会想保留当前页面，在新的标签打开。这个问题可以通过`右键->在新标签打开`解决，但是任然太麻烦。

可以通过在链接后面加上`{:target="_blank"}`实现，$$[参考资料](https://yinping4256.github.io/cn/Markdown%E8%AF%AD%E6%B3%95%E5%9C%A8%E6%96%B0%E7%AA%97%E5%8F%A3%E6%96%B0%E6%A0%87%E7%AD%BE%E9%A1%B5%E4%B8%AD%E6%89%93%E5%BC%80/){:target="_blank"}{:target="_blank"}{:target="_blank"}

但是目前博客写了一百多篇了，链接也多的不行，一个一个手工改我是接受不了的。

搞个正则试一下（$$[grep支持三种正则](https://wenzhiquan.github.io/2016/09/06/2016-09-06-grep/){:target="_blank"}{:target="_blank"}）：

- 思路是匹配符合 `$$[任意字段，但不包括中括号本身](http开头的任意字段，不包括小括号本身){:target="_blank"}{:target="_blank"}`要求的字段

注意：sed的正则匹配能力弱一些，无法排除`{:target="_blank"}`字段，所以先用grep强大的正则匹配过滤一遍，这样已经改过的绝大部分就不会再改了，脚本也可以多次执行了。

```shell
#!/bin/zsh
# 正则匹配完之后，需要提取文件名（awk），去重（uniq），导入while循环
count=0
grep -nr -E '\[[^][]*\]\(http[^()]*\)[^\{:target="_blank"\}]' _posts| awk -F ':' '{print $1}' | uniq | while IFS= read -r line; do
    file=${line}
    count=$((count + 1))
    echo "待修改文件：$line"
    # 提取文件名和匹配内容
    #file=$(echo "$line" | cut -d':' -f1)
    #num=$(echo "$line" | cut -d':' -f2)
    #match=$(echo "$line" | cut -d':' -f3-)

    # 使用sed进行替换，在匹配内容后面添加{:target="_blank"}
    #sed -i '' -E "s/(\[[^][]*\]\(http[^()]*\))/\1{:target=\"_blank\"}/g" "$file"
    #sed -E "s/(\[[^][]*\]\(http[^()]*\))/\1{:target=\"_blank\"}/g" "$file"
done
echo "待修改文件数量为：$count"
echo "请确认是否修改，如果确认去掉sed -i的注释"
```

涉及大面积的文本修改，执行脚本之前一定先提一个commit，执行脚本之后去看下修改是否符合预期。





[上一篇 优化侧栏搜索](/运维/2023/10/17/小白从零搭建博客(七)优化侧栏索引.html)
